<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Start Here: datascience Tutorial &mdash; datascience 0.5.5 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="datascience 0.5.5 documentation" href="index.html" />
    <link rel="next" title="Tables (datascience.tables)" href="tables.html" />
    <link rel="prev" title="Welcome to datascience’s documentation!" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tables.html" title="Tables (datascience.tables)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to datascience’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">datascience 0.5.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="start-here-datascience-tutorial">
<h1>Start Here: <code class="docutils literal"><span class="pre">datascience</span></code> Tutorial<a class="headerlink" href="#start-here-datascience-tutorial" title="Permalink to this headline">¶</a></h1>
<p>This is a brief introduction to the functionality in
<code class="xref py py-mod docutils literal"><span class="pre">datascience</span></code>.  For a complete reference guide, please see
<a class="reference internal" href="tables.html#tables-overview"><span>Tables (datascience.tables)</span></a>.</p>
<p>For other useful tutorials and examples, see:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.inferentialthinking.com/chapter1/tables.html">The textbook introduction to Tables</a></li>
<li><a class="reference external" href="https://github.com/deculler/TableDemos">Example notebooks</a></li>
</ul>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#getting-started" id="id1">Getting Started</a></li>
<li><a class="reference internal" href="#creating-a-table" id="id2">Creating a Table</a></li>
<li><a class="reference internal" href="#accessing-values" id="id3">Accessing Values</a></li>
<li><a class="reference internal" href="#manipulating-data" id="id4">Manipulating Data</a></li>
<li><a class="reference internal" href="#visualizing-data" id="id5">Visualizing Data</a></li>
<li><a class="reference internal" href="#exporting" id="id6">Exporting</a></li>
<li><a class="reference internal" href="#an-example" id="id7">An Example</a></li>
<li><a class="reference internal" href="#drawing-maps" id="id8">Drawing Maps</a></li>
</ul>
</div>
<div class="section" id="getting-started">
<h2><a class="toc-backref" href="#id1">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The most important functionality in the package is is the <code class="xref py py-class docutils literal"><span class="pre">Table</span></code>
class, which is the structure used to represent columns of data. First, load
the class:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">datascience</span> <span class="kn">import</span> <span class="n">Table</span>
</pre></div>
</div>
<p>In the IPython notebook, type <code class="docutils literal"><span class="pre">Table.</span></code> followed by the TAB-key to see a list
of members.</p>
<p>Note that for the Data Science 8 class we also import additional packages and
settings for all assignments and labs. This is so that plots and other available
packages mirror the ones in the textbook more closely. The exact code we use is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1"># HIDDEN</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;Agg&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">datascience</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In particular, the lines involving <code class="docutils literal"><span class="pre">matplotlib</span></code> allow for plotting within the
IPython notebook.</p>
</div>
<div class="section" id="creating-a-table">
<h2><a class="toc-backref" href="#id2">Creating a Table</a><a class="headerlink" href="#creating-a-table" title="Permalink to this headline">¶</a></h2>
<p>A Table is a sequence of labeled columns of data.</p>
<p>A Table can be constructed from scratch by extending an empty table with
columns.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [2]: </span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;count&#39;</span><span class="p">,</span>  <span class="p">[</span>  <span class="mi">9</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;points&#39;</span><span class="p">,</span> <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>  <span class="mi">10</span><span class="p">],</span>
<span class="gp">   ...: </span><span class="p">])</span>
<span class="gp">   ...: </span>

<span class="gp">In [3]: </span><span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">letter | count | points</span>
<span class="go">a      | 9     | 1</span>
<span class="go">b      | 3     | 2</span>
<span class="go">c      | 3     | 2</span>
<span class="go">z      | 1     | 10</span>
</pre></div>
</div>
<hr class="docutils" />
<p>More often, a table is read from a CSV file (or an Excel spreadsheet).  Here&#8217;s
the content of an example file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [4]: </span><span class="n">cat</span> <span class="n">sample</span><span class="o">.</span><span class="n">csv</span>
<span class="go">x,y,z</span>
<span class="go">1,10,100</span>
<span class="go">2,11,101</span>
<span class="go">3,12,102</span>
</pre></div>
</div>
<p>And this is how we load it in as a <code class="xref py py-class docutils literal"><span class="pre">Table</span></code> using
<a class="reference internal" href="_autosummary/datascience.tables.Table.read_table.html#datascience.tables.Table.read_table" title="datascience.tables.Table.read_table"><code class="xref py py-meth docutils literal"><span class="pre">read_table()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;sample.csv&#39;</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">x    | y    | z</span>
<span class="go">1    | 10   | 100</span>
<span class="go">2    | 11   | 101</span>
<span class="go">3    | 12   | 102</span>
</pre></div>
</div>
<p>CSVs from URLs are also valid inputs to
<a class="reference internal" href="_autosummary/datascience.tables.Table.read_table.html#datascience.tables.Table.read_table" title="datascience.tables.Table.read_table"><code class="xref py py-meth docutils literal"><span class="pre">read_table()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://data8.org/textbook/notebooks/sat2014.csv&#39;</span><span class="p">)</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">State        | Participation Rate | Critical Reading | Math | Writing | Combined</span>
<span class="go">North Dakota | 2.3                | 612              | 620  | 584     | 1816</span>
<span class="go">Illinois     | 4.6                | 599              | 616  | 587     | 1802</span>
<span class="go">Iowa         | 3.1                | 605              | 611  | 578     | 1794</span>
<span class="go">South Dakota | 2.9                | 604              | 609  | 579     | 1792</span>
<span class="go">Minnesota    | 5.9                | 598              | 610  | 578     | 1786</span>
<span class="go">Michigan     | 3.8                | 593              | 610  | 581     | 1784</span>
<span class="go">Wisconsin    | 3.9                | 596              | 608  | 578     | 1782</span>
<span class="go">Missouri     | 4.2                | 595              | 597  | 579     | 1771</span>
<span class="go">Wyoming      | 3.3                | 590              | 599  | 573     | 1762</span>
<span class="go">Kansas       | 5.3                | 591              | 596  | 566     | 1753</span>
<span class="go">... (41 rows omitted)</span>
</pre></div>
</div>
<hr class="docutils" />
<p>It&#8217;s also possible to add columns from a dictionary, but this option is
discouraged because dictionaries do not preserve column order.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [7]: </span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">({</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;letter&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;count&#39;</span><span class="p">:</span>  <span class="p">[</span>  <span class="mi">9</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>   <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>   <span class="mi">2</span><span class="p">,</span>  <span class="mi">10</span><span class="p">],</span>
<span class="gp">   ...: </span><span class="p">})</span>
<span class="gp">   ...: </span>

<span class="gp">In [8]: </span><span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-values">
<h2><a class="toc-backref" href="#id3">Accessing Values</a><a class="headerlink" href="#accessing-values" title="Permalink to this headline">¶</a></h2>
<p>To access values of columns in the table, use
<a class="reference internal" href="_autosummary/datascience.tables.Table.column.html#datascience.tables.Table.column" title="datascience.tables.Table.column"><code class="xref py py-meth docutils literal"><span class="pre">column()</span></code></a>, which takes a column label or index
and returns an array. Alternatively, <a class="reference internal" href="_autosummary/datascience.tables.Table.columns.html#datascience.tables.Table.columns" title="datascience.tables.Table.columns"><code class="xref py py-meth docutils literal"><span class="pre">columns()</span></code></a>
returns a list of columns (arrays).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="n">t</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [10]: </span><span class="n">t</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">)</span>
<span class="go">                                                                                                             Out[10]: </span>
<span class="go">array([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;z&#39;], </span>
<span class="go">      dtype=&#39;&lt;U1&#39;)</span>

<span class="gp">In [11]: </span><span class="n">t</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                                                                                                       Out[11]: array([ 1,  2,  2, 10])</span>
</pre></div>
</div>
<p>You can use bracket notation as a shorthand for this method:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [12]: </span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;letter&#39;</span><span class="p">]</span> <span class="c1"># This is a shorthand for t.column(&#39;letter&#39;)</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">array([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;z&#39;], </span>
<span class="go">      dtype=&#39;&lt;U1&#39;)</span>

<span class="gp">In [13]: </span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>        <span class="c1"># This is a shorthand for t.column(1)</span>
<span class="go">                                                          Out[13]: array([ 1,  2,  2, 10])</span>
</pre></div>
</div>
<p>To access values by row, <a class="reference internal" href="_autosummary/datascience.tables.Table.row.html#datascience.tables.Table.row" title="datascience.tables.Table.row"><code class="xref py py-meth docutils literal"><span class="pre">row()</span></code></a> returns a
row by index. Alternatively, <a class="reference internal" href="_autosummary/datascience.tables.Table.rows.html#datascience.tables.Table.rows" title="datascience.tables.Table.rows"><code class="xref py py-meth docutils literal"><span class="pre">rows()</span></code></a> returns an
list-like <code class="xref py py-class docutils literal"><span class="pre">Rows</span></code> object that contains
tuple-like <code class="xref py py-class docutils literal"><span class="pre">Row</span></code> objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [14]: </span><span class="n">t</span><span class="o">.</span><span class="n">rows</span>
<span class="gh">Out[14]: </span><span class="go"></span>
<span class="go">Rows(count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z)</span>

<span class="gp">In [15]: </span><span class="n">t</span><span class="o">.</span><span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">                                                                                                                    Out[15]: Row(count=9, points=1, letter=&#39;a&#39;)</span>

<span class="gp">In [16]: </span><span class="n">t</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">                                                                                                                                                                Out[16]: Row(count=9, points=1, letter=&#39;a&#39;)</span>

<span class="gp">In [17]: </span><span class="n">second</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="gp">In [18]: </span><span class="n">second</span>
<span class="gh">Out[18]: </span><span class="go">Row(count=3, points=2, letter=&#39;b&#39;)</span>

<span class="gp">In [19]: </span><span class="n">second</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">                                            Out[19]: 3</span>

<span class="gp">In [20]: </span><span class="n">second</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">                                                       Out[20]: 2</span>
</pre></div>
</div>
<p>To get the number of rows, use <a class="reference internal" href="_autosummary/datascience.tables.Table.num_rows.html#datascience.tables.Table.num_rows" title="datascience.tables.Table.num_rows"><code class="xref py py-attr docutils literal"><span class="pre">num_rows</span></code></a>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [21]: </span><span class="n">t</span><span class="o">.</span><span class="n">num_rows</span>
<span class="gh">Out[21]: </span><span class="go">4</span>
</pre></div>
</div>
</div>
<div class="section" id="manipulating-data">
<h2><a class="toc-backref" href="#id4">Manipulating Data</a><a class="headerlink" href="#manipulating-data" title="Permalink to this headline">¶</a></h2>
<p>Here are some of the most common operations on data. For the rest, see the
reference (<a class="reference internal" href="tables.html#tables-overview"><span>Tables (datascience.tables)</span></a>).</p>
<p>Adding a column with <a class="reference internal" href="_autosummary/datascience.tables.Table.with_column.html#datascience.tables.Table.with_column" title="datascience.tables.Table.with_column"><code class="xref py py-meth docutils literal"><span class="pre">with_column()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [22]: </span><span class="n">t</span>
<span class="gh">Out[22]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [23]: </span><span class="n">t</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s1">&#39;vowel?&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">])</span>
<span class="go">                                                                                                              Out[23]: </span>
<span class="go">count | points | letter | vowel?</span>
<span class="go">9     | 1      | a      | yes</span>
<span class="go">3     | 2      | b      | no</span>
<span class="go">3     | 2      | c      | no</span>
<span class="go">1     | 10     | z      | no</span>

<span class="gp">In [24]: </span><span class="n">t</span> <span class="c1"># .with_column returns a new table without modifying the original</span>
<span class="go">                                                                                                                                                                                                                                                                              Out[24]: </span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [25]: </span><span class="n">t</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s1">&#39;2 * count&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># A simple way to operate on columns</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                            Out[25]: </span>
<span class="go">count | points | letter | 2 * count</span>
<span class="go">9     | 1      | a      | 18</span>
<span class="go">3     | 2      | b      | 6</span>
<span class="go">3     | 2      | c      | 6</span>
<span class="go">1     | 10     | z      | 2</span>
</pre></div>
</div>
<p>Selecting columns with <a class="reference internal" href="_autosummary/datascience.tables.Table.select.html#datascience.tables.Table.select" title="datascience.tables.Table.select"><code class="xref py py-meth docutils literal"><span class="pre">select()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [26]: </span><span class="n">t</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">)</span>
<span class="gh">Out[26]: </span><span class="go"></span>
<span class="go">letter</span>
<span class="go">a</span>
<span class="go">b</span>
<span class="go">c</span>
<span class="go">z</span>

<span class="gp">In [27]: </span><span class="n">t</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">])</span>
<span class="go">                         Out[27]: </span>
<span class="go">letter | points</span>
<span class="go">a      | 1</span>
<span class="go">b      | 2</span>
<span class="go">c      | 2</span>
<span class="go">z      | 10</span>
</pre></div>
</div>
<p>Renaming columns with <a class="reference internal" href="_autosummary/datascience.tables.Table.relabeled.html#datascience.tables.Table.relabeled" title="datascience.tables.Table.relabeled"><code class="xref py py-meth docutils literal"><span class="pre">relabeled()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [28]: </span><span class="n">t</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [29]: </span><span class="n">t</span><span class="o">.</span><span class="n">relabeled</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span> <span class="s1">&#39;other name&#39;</span><span class="p">)</span>
<span class="go">                                                                                                              Out[29]: </span>
<span class="go">count | other name | letter</span>
<span class="go">9     | 1          | a</span>
<span class="go">3     | 2          | b</span>
<span class="go">3     | 2          | c</span>
<span class="go">1     | 10         | z</span>

<span class="gp">In [30]: </span><span class="n">t</span>
<span class="go">                                                                                                                                                                                                                                                Out[30]: </span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [31]: </span><span class="n">t</span><span class="o">.</span><span class="n">relabeled</span><span class="p">([</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                              Out[31]: </span>
<span class="go">y    | z    | x</span>
<span class="go">9    | 1    | a</span>
<span class="go">3    | 2    | b</span>
<span class="go">3    | 2    | c</span>
<span class="go">1    | 10   | z</span>
</pre></div>
</div>
<p>Selecting out rows by index with <a class="reference internal" href="_autosummary/datascience.tables.Table.take.html#datascience.tables.Table.take" title="datascience.tables.Table.take"><code class="xref py py-meth docutils literal"><span class="pre">take()</span></code></a> and
conditionally with <a class="reference internal" href="_autosummary/datascience.tables.Table.where.html#datascience.tables.Table.where" title="datascience.tables.Table.where"><code class="xref py py-meth docutils literal"><span class="pre">where()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [32]: </span><span class="n">t</span>
<span class="gh">Out[32]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [33]: </span><span class="n">t</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># the third row</span>
<span class="go">                                                                                                              Out[33]: </span>
<span class="go">count | points | letter</span>
<span class="go">3     | 2      | c</span>

<span class="gp">In [34]: </span><span class="n">t</span><span class="o">.</span><span class="n">take</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># the first and second rows</span>
<span class="go">                                                                                                                                                                   Out[34]: </span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [35]: </span><span class="n">t</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># rows where points == 2</span>
<span class="gh">Out[35]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>

<span class="gp">In [36]: </span><span class="n">t</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">)</span> <span class="c1"># rows where count &lt; 8</span>
<span class="go">                                                                        Out[36]: </span>
<span class="go">count | points | letter</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [37]: </span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">8</span> <span class="c1"># .where actually takes in an array of booleans</span>
<span class="go">                                                                                                                                                                   Out[37]: array([False,  True,  True,  True], dtype=bool)</span>

<span class="gp">In [38]: </span><span class="n">t</span><span class="o">.</span><span class="n">where</span><span class="p">([</span><span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">])</span> <span class="c1"># same as the last line</span>
<span class="go">                                                                                                                                                                                                                            Out[38]: </span>
<span class="go">count | points | letter</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>
</pre></div>
</div>
<p>Operate on table data with <a class="reference internal" href="_autosummary/datascience.tables.Table.sort.html#datascience.tables.Table.sort" title="datascience.tables.Table.sort"><code class="xref py py-meth docutils literal"><span class="pre">sort()</span></code></a>,
<a class="reference internal" href="_autosummary/datascience.tables.Table.group.html#datascience.tables.Table.group" title="datascience.tables.Table.group"><code class="xref py py-meth docutils literal"><span class="pre">group()</span></code></a>, and
<a class="reference internal" href="_autosummary/datascience.tables.Table.pivot.html#datascience.tables.Table.pivot" title="datascience.tables.Table.pivot"><code class="xref py py-meth docutils literal"><span class="pre">pivot()</span></code></a></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [39]: </span><span class="n">t</span>
<span class="gh">Out[39]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [40]: </span><span class="n">t</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="go">                                                                                                              Out[40]: </span>
<span class="go">count | points | letter</span>
<span class="go">1     | 10     | z</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">9     | 1      | a</span>

<span class="gp">In [41]: </span><span class="n">t</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="n">descending</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                            Out[41]: </span>
<span class="go">count | points | letter</span>
<span class="go">1     | 10     | z</span>
<span class="go">3     | 2      | c</span>
<span class="go">3     | 2      | b</span>
<span class="go">9     | 1      | a</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="go"># You may pass a reducing function into the collect arg</span>
<span class="go"># Note the renaming of the points column because of the collect arg</span>
<span class="gp">In [42]: </span><span class="n">t</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">collect</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="gh">Out[42]: </span><span class="go"></span>
<span class="go">count | points sum</span>
<span class="go">1     | 10</span>
<span class="go">3     | 4</span>
<span class="go">9     | 1</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [43]: </span><span class="n">other_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;mar_status&#39;</span><span class="p">,</span>  <span class="p">[</span><span class="s1">&#39;married&#39;</span><span class="p">,</span> <span class="s1">&#39;married&#39;</span><span class="p">,</span> <span class="s1">&#39;partner&#39;</span><span class="p">,</span> <span class="s1">&#39;partner&#39;</span><span class="p">,</span> <span class="s1">&#39;married&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;empl_status&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Working as paid&#39;</span><span class="p">,</span> <span class="s1">&#39;Working as paid&#39;</span><span class="p">,</span> <span class="s1">&#39;Not working&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                    <span class="s1">&#39;Not working&#39;</span><span class="p">,</span> <span class="s1">&#39;Not working&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;count&#39;</span><span class="p">,</span>       <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">   ....: </span>

<span class="gp">In [44]: </span><span class="n">other_table</span>
<span class="gh">Out[44]: </span><span class="go"></span>
<span class="go">mar_status | empl_status     | count</span>
<span class="go">married    | Working as paid | 1</span>
<span class="go">married    | Working as paid | 1</span>
<span class="go">partner    | Not working     | 1</span>
<span class="go">partner    | Not working     | 1</span>
<span class="go">married    | Not working     | 1</span>

<span class="gp">In [45]: </span><span class="n">other_table</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;mar_status&#39;</span><span class="p">,</span> <span class="s1">&#39;empl_status&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">collect</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                    Out[45]: </span>
<span class="go">empl_status     | married | partner</span>
<span class="go">Not working     | 1       | 2</span>
<span class="go">Working as paid | 2       | 0</span>
</pre></div>
</div>
</div>
<div class="section" id="visualizing-data">
<h2><a class="toc-backref" href="#id5">Visualizing Data</a><a class="headerlink" href="#visualizing-data" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll start with some data drawn at random from two normal distributions:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [46]: </span><span class="n">normal_data</span> <span class="o">=</span> <span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">([</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;data1&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;data2&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)])</span>
<span class="gp">   ....: </span>

<span class="gp">In [47]: </span><span class="n">normal_data</span>
<span class="gh">Out[47]: </span><span class="go"></span>
<span class="go">data1     | data2</span>
<span class="go">0.268369  | 4.31572</span>
<span class="go">-0.120498 | 6.5812</span>
<span class="go">3.6369    | 2.73302</span>
<span class="go">2.96735   | 2.40334</span>
<span class="go">6.01993   | 3.69505</span>
<span class="go">3.20723   | 0.731839</span>
<span class="go">-1.02962  | 4.523</span>
<span class="go">1.11332   | 8.71799</span>
<span class="go">-1.4235   | 1.79749</span>
<span class="go">1.26247   | 2.92424</span>
<span class="go">... (90 rows omitted)</span>
</pre></div>
</div>
<p>Draw histograms with <a class="reference internal" href="_autosummary/datascience.tables.Table.hist.html#datascience.tables.Table.hist" title="datascience.tables.Table.hist"><code class="xref py py-meth docutils literal"><span class="pre">hist()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [48]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/hist.png"><img alt="_images/hist.png" src="_images/hist.png" style="width: 4in;" /></a>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [49]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/hist_binned.png"><img alt="_images/hist_binned.png" src="_images/hist_binned.png" style="width: 4in;" /></a>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [50]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">overlay</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/hist_overlay.png"><img alt="_images/hist_overlay.png" src="_images/hist_overlay.png" style="width: 4in;" /></a>
<p>If we treat the <code class="docutils literal"><span class="pre">normal_data</span></code> table as a set of x-y points, we can
<a class="reference internal" href="_autosummary/datascience.tables.Table.plot.html#datascience.tables.Table.plot" title="datascience.tables.Table.plot"><code class="xref py py-meth docutils literal"><span class="pre">plot()</span></code></a> and
<a class="reference internal" href="_autosummary/datascience.tables.Table.scatter.html#datascience.tables.Table.scatter" title="datascience.tables.Table.scatter"><code class="xref py py-meth docutils literal"><span class="pre">scatter()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [51]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;data1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;data1&#39;</span><span class="p">)</span> <span class="c1"># Sort first to make plot nicer</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/plot.png"><img alt="_images/plot.png" src="_images/plot.png" style="width: 4in;" /></a>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [52]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s1">&#39;data1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/scatter.png"><img alt="_images/scatter.png" src="_images/scatter.png" style="width: 4in;" /></a>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [53]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s1">&#39;data1&#39;</span><span class="p">,</span> <span class="n">fit_line</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/scatter_line.png"><img alt="_images/scatter_line.png" src="_images/scatter_line.png" style="width: 4in;" /></a>
<p>Use <a class="reference internal" href="_autosummary/datascience.tables.Table.barh.html#datascience.tables.Table.barh" title="datascience.tables.Table.barh"><code class="xref py py-meth docutils literal"><span class="pre">barh()</span></code></a> to display categorical data.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [54]: </span><span class="n">t</span>
<span class="gh">Out[54]: </span><span class="go"></span>
<span class="go">count | points | letter</span>
<span class="go">9     | 1      | a</span>
<span class="go">3     | 2      | b</span>
<span class="go">3     | 2      | c</span>
<span class="go">1     | 10     | z</span>

<span class="gp">In [55]: </span><span class="n">t</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/barh.png"><img alt="_images/barh.png" src="_images/barh.png" style="width: 4in;" /></a>
</div>
<div class="section" id="exporting">
<h2><a class="toc-backref" href="#id6">Exporting</a><a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h2>
<p>Exporting to CSV is the most common operation and can be done by first
converting to a pandas dataframe with <a class="reference internal" href="_autosummary/datascience.tables.Table.to_df.html#datascience.tables.Table.to_df" title="datascience.tables.Table.to_df"><code class="xref py py-meth docutils literal"><span class="pre">to_df()</span></code></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [56]: </span><span class="n">normal_data</span>
<span class="gh">Out[56]: </span><span class="go"></span>
<span class="go">data1     | data2</span>
<span class="go">0.268369  | 4.31572</span>
<span class="go">-0.120498 | 6.5812</span>
<span class="go">3.6369    | 2.73302</span>
<span class="go">2.96735   | 2.40334</span>
<span class="go">6.01993   | 3.69505</span>
<span class="go">3.20723   | 0.731839</span>
<span class="go">-1.02962  | 4.523</span>
<span class="go">1.11332   | 8.71799</span>
<span class="go">-1.4235   | 1.79749</span>
<span class="go">1.26247   | 2.92424</span>
<span class="go">... (90 rows omitted)</span>

<span class="go"># index = False prevents row numbers from appearing in the resulting CSV</span>
<span class="gp">In [57]: </span><span class="n">normal_data</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;normal_data.csv&#39;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="an-example">
<h2><a class="toc-backref" href="#id7">An Example</a><a class="headerlink" href="#an-example" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll recreate the steps in <a class="reference external" href="http://data8.org/text/3_inference.html#Using-the-Bootstrap-Method-to-Test-Hypotheses">Chapter 3 of the textbook</a> to see if there is a
significant difference in birth weights between smokers and non-smokers using a
bootstrap test.</p>
<p>For more examples, check out <a class="reference external" href="https://github.com/deculler/TableDemos">the TableDemos repo</a>.</p>
<p>From the text:</p>
<blockquote>
<div>The table <code class="docutils literal"><span class="pre">baby</span></code> contains data on a random sample of 1,174 mothers and
their newborn babies. The column <code class="docutils literal"><span class="pre">birthwt</span></code> contains the birth weight of
the baby, in ounces; <code class="docutils literal"><span class="pre">gest_days</span></code> is the number of gestational days, that
is, the number of days the baby was in the womb. There is also data on
maternal age, maternal height, maternal pregnancy weight, and whether or not
the mother was a smoker.</div></blockquote>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [58]: </span><span class="n">baby</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://data8.org/textbook/notebooks/baby.csv&#39;</span><span class="p">)</span>

<span class="gp">In [59]: </span><span class="n">baby</span> <span class="c1"># Let&#39;s take a peek at the table</span>
<span class="gh">Out[59]: </span><span class="go"></span>
<span class="go">birthwt | gest_days | mat_age | mat_ht | mat_pw | m_smoker</span>
<span class="go">120     | 284       | 27      | 62     | 100    | 0</span>
<span class="go">113     | 282       | 33      | 64     | 135    | 0</span>
<span class="go">128     | 279       | 28      | 64     | 115    | 1</span>
<span class="go">108     | 282       | 23      | 67     | 125    | 1</span>
<span class="go">136     | 286       | 25      | 62     | 93     | 0</span>
<span class="go">138     | 244       | 33      | 62     | 178    | 0</span>
<span class="go">132     | 245       | 23      | 65     | 140    | 0</span>
<span class="go">120     | 289       | 25      | 62     | 125    | 0</span>
<span class="go">143     | 299       | 30      | 66     | 136    | 1</span>
<span class="go">140     | 351       | 27      | 68     | 120    | 0</span>
<span class="go">... (1164 rows omitted)</span>

<span class="go"># Select out columns we want.</span>
<span class="gp">In [60]: </span><span class="n">smoker_and_wt</span> <span class="o">=</span> <span class="n">baby</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="s1">&#39;birthwt&#39;</span><span class="p">])</span>

<span class="gp">In [61]: </span><span class="n">smoker_and_wt</span>
<span class="gh">Out[61]: </span><span class="go"></span>
<span class="go">m_smoker | birthwt</span>
<span class="go">0        | 120</span>
<span class="go">0        | 113</span>
<span class="go">1        | 128</span>
<span class="go">1        | 108</span>
<span class="go">0        | 136</span>
<span class="go">0        | 138</span>
<span class="go">0        | 132</span>
<span class="go">0        | 120</span>
<span class="go">1        | 143</span>
<span class="go">0        | 140</span>
<span class="go">... (1164 rows omitted)</span>
</pre></div>
</div>
<p>Let&#8217;s compare the number of smokers to non-smokers.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [62]: </span><span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/m_smoker.png"><img alt="_images/m_smoker.png" src="_images/m_smoker.png" style="width: 4in;" /></a>
<p>We can also compare the distribution of birthweights between smokers and
non-smokers.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="go"># Non smokers</span>
<span class="go"># We do this by grabbing the rows that correspond to mothers that don&#39;t</span>
<span class="go"># smoke, then plotting a histogram of just the birthweights.</span>
<span class="gp">In [63]: </span><span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>

<span class="go"># Smokers</span>
<span class="gp">In [64]: </span><span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/not_m_smoker_weights.png"><img alt="_images/not_m_smoker_weights.png" src="_images/not_m_smoker_weights.png" style="width: 4in;" /></a>
<a class="reference internal image-reference" href="_images/m_smoker_weights.png"><img alt="_images/m_smoker_weights.png" src="_images/m_smoker_weights.png" style="width: 4in;" /></a>
<p>What&#8217;s the difference in mean birth weight of the two categories?</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [65]: </span><span class="n">nonsmoking_mean</span> <span class="o">=</span> <span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="gp">In [66]: </span><span class="n">smoking_mean</span> <span class="o">=</span> <span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="gp">In [67]: </span><span class="n">observed_diff</span> <span class="o">=</span> <span class="n">nonsmoking_mean</span> <span class="o">-</span> <span class="n">smoking_mean</span>

<span class="gp">In [68]: </span><span class="n">observed_diff</span>
<span class="gh">Out[68]: </span><span class="go">9.2661425720249184</span>
</pre></div>
</div>
<p>Let&#8217;s do the bootstrap test on the two categories.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [69]: </span><span class="n">num_nonsmokers</span> <span class="o">=</span> <span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;m_smoker&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">num_rows</span>

<span class="gp">In [70]: </span><span class="k">def</span> <span class="nf">bootstrap_once</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="sd">    Computes one bootstrapped difference in means.</span>
<span class="gp">   ....: </span><span class="sd">    The table.sample method lets us take random samples.</span>
<span class="gp">   ....: </span><span class="sd">    We then split according to the number of nonsmokers in the original sample.</span>
<span class="gp">   ....: </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">   ....: </span>    <span class="n">resample</span> <span class="o">=</span> <span class="n">smoker_and_wt</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">with_replacement</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="n">bootstrap_diff</span> <span class="o">=</span> <span class="n">resample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)[:</span><span class="n">num_nonsmokers</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> \
<span class="gp">   ....: </span>        <span class="n">resample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;birthwt&#39;</span><span class="p">)[</span><span class="n">num_nonsmokers</span><span class="p">:]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">bootstrap_diff</span>
<span class="gp">   ....: </span>

<span class="gp">In [71]: </span><span class="n">repetitions</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="gp">In [72]: </span><span class="n">bootstrapped_diff_means</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[</span> <span class="n">bootstrap_once</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">repetitions</span><span class="p">)</span> <span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [73]: </span><span class="n">bootstrapped_diff_means</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="gh">Out[73]: </span><span class="go"></span>
<span class="go">array([ 0.84239072, -0.64044365,  0.46552707, -0.42685985,  0.45379892,</span>
<span class="go">       -0.50954492, -1.46739491,  0.08737145, -1.04683334, -0.78131237])</span>

<span class="gp">In [74]: </span><span class="n">num_diffs_greater</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">bootstrapped_diff_means</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">observed_diff</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="gp">In [75]: </span><span class="n">p_value</span> <span class="o">=</span> <span class="n">num_diffs_greater</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">bootstrapped_diff_means</span><span class="p">)</span>

<span class="gp">In [76]: </span><span class="n">p_value</span>
<span class="gh">Out[76]: </span><span class="go">0.0</span>
</pre></div>
</div>
</div>
<div class="section" id="drawing-maps">
<h2><a class="toc-backref" href="#id8">Drawing Maps</a><a class="headerlink" href="#drawing-maps" title="Permalink to this headline">¶</a></h2>
<p>To come.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Start Here: <code class="docutils literal"><span class="pre">datascience</span></code> Tutorial</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#creating-a-table">Creating a Table</a></li>
<li><a class="reference internal" href="#accessing-values">Accessing Values</a></li>
<li><a class="reference internal" href="#manipulating-data">Manipulating Data</a></li>
<li><a class="reference internal" href="#visualizing-data">Visualizing Data</a></li>
<li><a class="reference internal" href="#exporting">Exporting</a></li>
<li><a class="reference internal" href="#an-example">An Example</a></li>
<li><a class="reference internal" href="#drawing-maps">Drawing Maps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to datascience&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tables.html"
                        title="next chapter">Tables (<code class="docutils literal"><span class="pre">datascience.tables</span></code>)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tables.html" title="Tables (datascience.tables)"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to datascience’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">datascience 0.5.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, John DeNero, David Culler, Alvin Wan, and Sam Lau.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>